# cv
package com.cts.handson.dao; import java.util.List; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.context.annotation.ComponentScan; import org.springframework.jdbc.core.BeanPropertyRowMapper; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.stereotype.Service; import org.springframework.transaction.PlatformTransactionManager; import org.springframework.transaction.TransactionStatus; import org.springframework.transaction.support.DefaultTransactionDefinition; import com.cts.handson.model.EBill; @Service @ComponentScan("com.cts.handson") public class EBillDAO {   @Autowired   JdbcTemplate jdbcTemplate;   @Autowired   PlatformTransactionManager txManager;   public void deleteBill(long...billNumbers) {     DefaultTransactionDefinition def = new DefaultTransactionDefinition();     TransactionStatus status = txManager.getTransaction(def);     try {      for(long billNumber:billNumbers){      if(billNumber<100){      throw new Exception("Bill number less than 100: "+ billNumber);      }      jdbcTemplate.update("DELETE FROM EBILL WHERE bill_number = ?",billNumber);      }      txManager.commit(status);       //delete business logic here     }catch(Exception ex) {      txManager.rollback(status);      throw new RuntimeException("Exception occured: "+ ex.getMessage());     }       //roll back logic here   }   public List<EBill> getAllBill() {     //retrieve business logic here     return jdbcTemplate.query("SELECT * FROM EBILL",new BeanPropertyRowMapper<>(EBill.class));   } }
